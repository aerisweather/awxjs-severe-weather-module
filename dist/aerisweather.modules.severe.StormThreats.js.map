{"version":3,"sources":["webpack://Severe/./node_modules/@aerisweather/javascript-sdk/dist/modules/MapSourceModule.js","webpack://Severe/./src/stormthreats/StormThreats.ts"],"names":["Object","defineProperty","exports","value","default","_utils","_default","MapSourceModule","opts","this","_opts","_account","get","prototype","id","enumerable","configurable","_app","isset","map","_map","_source","set","_this","on","e","results","data","onData","_data","_group","group","controls","initialize","account","app","source","legend","infopanel","showInfoPanel","title","showInfo","onInit","onAdd","onRemove","result","onMarkerClick","marker","onShapeClick","shape","module","type","requiresBounds","service","_request","properties","root","path","style","polygon","item","fill","color","opacity","request","api","endpoint","format","limit","filter"],"mappings":"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","file":"aerisweather.modules.severe.StormThreats.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _utils = require(\"../utils\");\n\n/**\n * A map source module is a container for providing all of the required configuration and\n * functionality needed for rendering and controlling a map content source on an interactive map\n * application.\n *\n * A module can be a direct instance of `MapSourceModule`, in which case a configuration object\n * must be provided when instantiating the instance. Or, a module can be provided as a subclass\n * of `MapSourceModule`, in which case the subclass can override the necessary properties and\n * methods of the parent class to provide the necessary configuration and functionality.\n *\n * Regardless which implementation method is used, a module must return a valid map content\n * source from the `source()` method.\n *\n * @class MapSourceModule\n * @implements {IMapSourceModule}\n */\nvar MapSourceModule =\n/** @class */\nfunction () {\n  /**\n   * Initializes and returns a map source module instance configured with the specified options\n   * if provided.\n   *\n   * @param {any} [opts=null]\n   * @memberof MapSourceModule\n   */\n  function MapSourceModule(opts) {\n    if (opts === void 0) {\n      opts = null;\n    }\n\n    this._opts = opts || {};\n    this._account = (0, _utils.get)(opts, 'account');\n  }\n\n  Object.defineProperty(MapSourceModule.prototype, \"id\", {\n    /**\n     * Module identifier.\n     *\n     * @readonly\n     * @type {string}\n     * @memberof MapSourceModule\n     */\n    get: function () {\n      return this._opts.id;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MapSourceModule.prototype, \"account\", {\n    /**\n     * Aeris account associated with the module.\n     *\n     * @readonly\n     * @type {Account}\n     * @memberof MapSourceModule\n     */\n    get: function () {\n      return this._account;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MapSourceModule.prototype, \"app\", {\n    /**\n     * Application the module was initialized with.\n     *\n     * @readonly\n     * @type {InteractiveMapApp}\n     * @memberof MapSourceModule\n     */\n    get: function () {\n      return this._app;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MapSourceModule.prototype, \"map\", {\n    /**\n     * Application map instance.\n     *\n     * @readonly\n     * @type {InteractiveMap}\n     * @memberof MapSourceModule\n     */\n    get: function () {\n      return (0, _utils.isset)(this._app) ? this._app.map : this._map;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MapSourceModule.prototype, \"mapSource\", {\n    /**\n     * Map content source created for the module.\n     *\n     * @type {*}\n     * @memberof MapSourceModule\n     */\n    get: function () {\n      return this._source;\n    },\n\n    /**\n     * Sets the module's map content source.\n     *\n     * @memberof MapSourceModule\n     */\n    set: function (value) {\n      var _this = this;\n\n      this._source = value;\n\n      if (value) {\n        value.on('data:load', function (e) {\n          var results = e.data.results;\n\n          if (results) {\n            _this.onData(results);\n          }\n        });\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MapSourceModule.prototype, \"data\", {\n    /**\n     * Data associated with the module.\n     *\n     * If the module loads remote data when added to a map, this value will return the data that\n     * was last returned by the remote request.\n     *\n     * @readonly\n     * @type {*}\n     * @memberof MapSourceModule\n     */\n    get: function () {\n      return this._data;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MapSourceModule.prototype, \"opts\", {\n    /**\n     * Returns the module's configuration options.\n     */\n    get: function () {\n      return this._opts;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MapSourceModule.prototype, \"group\", {\n    /**\n     * Parent module group the module belongs to, if any.\n     *\n     * @type {ModuleGroup}\n     * @memberof MapSourceModule\n     */\n    get: function () {\n      return this._group;\n    },\n\n    /**\n     * Sets the parent module group.\n     *\n     * @memberof MapSourceModule\n     */\n    set: function (group) {\n      this._group = group;\n      this._opts.controls = null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * Initializes the module with the specified Aeris account and application.\n   *\n   * @param {Account} account\n   * @param {InteractiveMapApp} app\n   * @memberof MapSourceModule\n   */\n\n  MapSourceModule.prototype.initialize = function (account, app, map) {\n    if (map === void 0) {\n      map = null;\n    }\n\n    this._account = account;\n    this._app = app;\n    this._map = app ? app.map : map;\n  };\n  /**\n   * Returns the map content source configuration.\n   *\n   * @see LayerOptions\n   * @returns {*}\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.source = function () {\n    return this._opts.source;\n  };\n  /**\n   * Returns the application controls configuration.\n   *\n   * @see ButtonOptions\n   * @see SegmentedButtonOptions\n   * @see ButtonGroupOptions\n   * @returns {*}\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.controls = function () {\n    return this._opts.controls;\n  };\n  /**\n   * Returns the legend configuration.\n   *\n   * @see LegendOptions\n   * @returns {*}\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.legend = function () {\n    return this._opts.legend;\n  };\n  /**\n   * Returns the configuration for the info panel content view.\n   *\n   * @see InfoPanelContentViewOptions\n   * @returns {*}\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.infopanel = function () {\n    return this._opts.infopanel;\n  };\n  /**\n   * Shows the map info panel using the specified title and data for the configured view\n   * associated with the module.\n   *\n   * @param {string} title\n   * @param {*} [data]\n   * @returns {InfoPanel}\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.showInfoPanel = function (title, data) {\n    return this.app.showInfo(this.id, title, data);\n  };\n  /**\n   * Called when the module has been initialized with an application.\n   *\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.onInit = function () {\n    if (this._opts.onInit) {\n      this._opts.onInit();\n    }\n  };\n  /**\n   * Called when the module's map content source has been added to the map.\n   *\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.onAdd = function () {\n    if (this._opts.onAdd) {\n      this._opts.onAdd();\n    }\n  };\n  /**\n   * Called when the module's map content source is removed from the map.\n   *\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.onRemove = function () {\n    if (this._opts.onRemove) {\n      this._opts.onRemove();\n    }\n  };\n  /**\n   * Called when the module's map content source has loaded data.\n   *\n   * @param {*} result\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.onData = function (result) {\n    if (this._opts.onData) {\n      this._opts.onData(result);\n    }\n  };\n  /**\n   * Called when a marker associated with the module's map content source is clicked on the map.\n   *\n   * @param {*} marker\n   * @param {*} data\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.onMarkerClick = function (marker, data) {\n    if (this._opts.onMarkerClick) {\n      this._opts.onMarkerClick(marker, data);\n    }\n  };\n  /**\n   * Called when a polygon or polyline associated with the module's map content source is clicked\n   * on the map.\n   *\n   * @param {*} shape\n   * @param {*} data\n   * @memberof MapSourceModule\n   */\n\n\n  MapSourceModule.prototype.onShapeClick = function (shape, data) {\n    if (this._opts.onShapeClick) {\n      this._opts.onShapeClick(shape, data);\n    }\n  };\n\n  return MapSourceModule;\n}();\n\nvar _default = MapSourceModule;\nexports.default = _default;\nmodule.exports = exports.default;","import MapSourceModule from '@aerisweather/javascript-sdk/dist/modules/MapSourceModule';\nimport ApiRequest, { ApiAction } from '@aerisweather/javascript-sdk/dist/network/api/ApiRequest';\nimport * as utils from '@aerisweather/javascript-sdk/dist/utils/index';\nclass StormThreats extends MapSourceModule {\n    private _request: ApiRequest;\n\n    get id() {\n        return 'stormthreats';\n    }\n    constructor(opts:any = null) {\n        super(opts);\n    }\n\n    source(): any {\n \n        const properties: any = {\n            root: 'features',\n            path: 'geometry'\n        }\n\n        return {\n            type: 'vector',\n            requiresBounds: true,\n            data: {\n                service: () => {\n                    return this._request;\n                },\n                properties: properties\n            },\n            style: {\n                polygon: (item: any) => {\n                    return {\n                        fill: {\n                            color: '#ffa500',\n                            opacity: 0.65\n                        },\n                        // stroke: {\n                        //     color: '#030303',\n                        //     width: 1,\n                        //     opacity: 0.8\n                        // }\n                    };\n                }\n            }\n        }\n    }\n    controls(): any {\n\t\treturn {\n\t\t\tvalue: this.id,\n\t\t\ttitle: 'Storm Threats'\n\t\t};\n    }\n    onInit() {\n\t\t\n\t\tconst request = this.account.api()\n            .endpoint('stormcells/summary')\n            .format('geojson')\n            .limit(1)\n            .filter('threat,geo');\n\t\tthis._request = request;\n    }\n}\nexport default StormThreats;"],"sourceRoot":""}